"use client";

import Link from "next/link";
import { satoshi, ibm_plex_mono, clash_display } from "@/fonts";
import { useEffect, useState } from "react";
import { createClientComponentClient } from "@supabase/auth-helpers-nextjs";

const supabase = createClientComponentClient();

export const BlockMin = () => {
  const [user, setUser] = useState(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    async function getUser() {
      const {
        data: { user },
      } = await supabase.auth.getUser();
      setUser(user);
      setLoading(false);
    }

    getUser();
  }, []);

  const path = user ? "/dashboard" : "/login";
  const blockTitle = user ? "Dashboard" : "Connexion";

  return (
    <Link
      href={path}
      className="h-[200px] lg:h-auto lg:w-1/3 rounded-xl bg-purple p-8 text-white flex flex-col justify-between relative group gap-16 lg:gap-0"
    >
      <h2 className={satoshi.className + " text-3xl lg:text-6xl font-medium"}>
        {blockTitle}
      </h2>
      <svg
        className="group-hover:ml-4 ease-out duration-100 w-[32px] lg:w-[64px]"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 65 49"
        fill="none"
      >
        <path
          d="M65 22.2656V26.7344C53.1573 26.7344 43.5237 36.7221 43.5237 49H39.2134C39.2134 39.7161 43.8039 31.5271 50.7543 26.7344H0V22.2656H50.7435C43.7931 17.4729 39.2134 9.28386 39.2134 0H43.5237C43.5237 12.2779 53.1573 22.2656 65 22.2656Z"
          fill="#EEEEEE"
        />
      </svg>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 248 212"
        fill="none"
        className="absolute -bottom-3 lg:bottom-0 right-0 w-[160px] lg:w-[248px] "
      >
        <path
          d="M142.402 285C122.949 285 104.514 281.293 87.0974 273.879C69.6813 266.465 54.4496 256.269 41.4024 243.29C28.3554 230.312 18.1933 215.148 10.916 197.8C3.63867 180.452 0 161.915 0 142.188C0 122.468 3.63867 103.951 10.916 86.6384C18.1933 69.3252 28.3554 54.2364 41.4024 41.3721C54.4496 28.5075 69.6813 18.396 87.0974 11.0376C104.514 3.67921 122.949 0 142.402 0C162.123 0 180.639 3.6803 197.952 11.0409C215.265 18.4012 230.456 28.5153 243.526 41.3832C256.595 54.2513 266.775 69.3443 274.065 86.6621C281.355 103.98 285 122.456 285 142.091C285 161.882 281.355 180.452 274.065 197.8C266.775 215.148 256.595 230.312 243.526 243.29C230.456 256.269 215.265 266.465 197.952 273.879C180.639 281.293 162.123 285 142.402 285ZM142.5 276.81C153.859 264.174 162.875 251.255 169.548 238.055C176.222 224.854 181.879 209.792 186.519 192.866H98.8901C103.258 211.02 108.915 226.561 115.861 239.488C122.808 252.416 131.687 264.856 142.5 276.81ZM130.625 275.991C121.616 266.71 113.393 254.494 105.954 239.343C98.5147 224.192 93.0083 208.7 89.4343 192.866H18.222C28.732 216.889 43.644 235.999 62.958 250.194C82.2719 264.389 104.828 272.988 130.625 275.991ZM154.784 275.991C179.08 273.807 201.158 265.277 221.018 250.399C240.878 235.521 256.268 216.343 267.188 192.866H195.975C190.9 209.246 184.677 224.874 177.306 239.752C169.935 254.63 162.428 266.71 154.784 275.991ZM15.7651 183.858H87.6293C86.2644 176.214 85.3089 168.878 84.7629 161.848C84.2169 154.819 83.944 148.233 83.944 142.091C83.944 135.948 84.2169 129.431 84.7629 122.538C85.3089 115.645 86.2644 108.513 87.6293 101.142H15.7651C13.4447 107.284 11.7385 113.882 10.6466 120.936C9.5546 127.989 9.00862 135.041 9.00862 142.091C9.00862 149.413 9.5546 156.602 10.6466 163.655C11.7385 170.708 13.4447 177.443 15.7651 183.858ZM96.8427 183.858H188.567C189.659 175.941 190.512 168.695 191.126 162.12C191.74 155.544 192.047 148.867 192.047 142.091C192.047 135.587 191.74 129.115 191.126 122.676C190.512 116.237 189.659 109.059 188.567 101.142H96.8427C95.4777 109.059 94.4881 116.237 93.8739 122.676C93.2597 129.115 92.9526 135.587 92.9526 142.091C92.9526 148.867 93.2597 155.544 93.8739 162.12C94.4881 168.695 95.4777 175.941 96.8427 183.858ZM197.371 183.858H269.644C271.692 177.443 273.261 170.708 274.353 163.655C275.445 156.602 275.991 149.413 275.991 142.091C275.991 135.041 275.445 127.989 274.353 120.936C273.261 113.882 271.692 107.284 269.644 101.142H197.78C198.872 109.332 199.691 116.805 200.237 123.561C200.783 130.318 201.056 136.494 201.056 142.091C201.056 148.233 200.783 154.75 200.237 161.643C199.691 168.536 198.736 175.941 197.371 183.858ZM195.975 92.1336H267.188C256.404 67.9741 241.424 48.6602 222.247 34.1918C203.069 19.7234 180.445 11.1925 154.375 8.59914C163.384 19.2457 171.539 31.8714 178.842 46.4763C186.144 61.0812 191.855 76.3003 195.975 92.1336ZM98.8901 92.1336H186.929C182.288 75.2083 176.324 59.736 169.037 45.7167C161.749 31.6971 152.903 19.1881 142.5 8.18966C132.506 18.5056 123.968 30.3663 116.885 43.7717C109.802 57.1768 103.804 73.2974 98.8901 92.1336ZM18.222 92.1336H89.4343C93.4178 76.3003 98.9925 61.1835 106.158 46.7834C113.324 32.3833 121.343 19.6552 130.216 8.59914C104.282 11.602 81.7259 20.167 62.5485 34.2942C43.371 48.4213 28.5955 67.7011 18.222 92.1336Z"
          fill="#F9F9F9"
          fillOpacity="0.2"
        />
      </svg>
    </Link>
  );
};

export default BlockMin;
